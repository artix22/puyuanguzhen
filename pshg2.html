<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>濮商会馆南宋决策</title>
	<style type="text/css">
	
			html,body{
						
						width:100%;
						margin:0px;
						padding: 0px;
					}
						
			body{
					display:flex;
					flex-direction:column;
				}
					
			.container{
						min-width:640px;
						position: relative;
						height:100vh;
						margin:0 auto;
						text-align:center;
						overflow:hidden;
					}
			#overlay {
			    position: absolute;
			    top: 0;
			    left: 0;
			    width: 100%;
			    height: 100%;
			    background: rgba(0, 0, 0, 0); /* 轻微透明 */
			    z-index: 9997; /* 确保它位于其他内容之上 */
			    display: none;
				 cursor: pointer;/* 初始时隐藏，将通过JavaScript显示 */
			}
			#overlay2 {
			    position: absolute;
			    top: 0;
			    left: 0;
			    width: 100%;
			    height: 100%;
			    background: rgba(0, 0, 0, 0); /* 轻微透明 */
			    z-index: 9998; /* 确保它位于其他内容之上 */
			    display: none;
				 cursor: pointer;/* 初始时隐藏，将通过JavaScript显示 */
			}
			.block-link{
				position:absolute;
				width:100%;
				height:100%;
				left:0;
				top:0;
			}
			
			 /* 隐藏除第一阶段外的所有阶段 */
			        .stage {
			            display: none;
			        }
			 
			        /* 显示当前阶段的样式（通过JavaScript动态添加） */
			        .active-stage {
			            display: block;
						width:100%;
						height:100%;
						top:0;
						left:0;
						position:absolute;
			        }
			#bg{
						position:relative;
						margin:auto;
						width:fit-content;
						overflow: hidden;
					}
			
			#back{
				    position: absolute;
					width: 10%;
					right: 86.9%;
					top: 2.5%;
					z-index: 9999;
					cursor: pointer;
				}
			
			.bgimg{
					width:100%;
					height:100%;
					height:100vh;
					}
			#c{
				display: flex;
				
				position:absolute;
				top:14%;
				transform: translate(0%,-50%);
				align-items: center;
				justify-content: center;
				text-align: center;
				width: 100%;
				max-width: 600px; /* Limit maximum width for better readability on large screens */
				margin: auto;
				
							
							
				box-sizing: border-box;
			}
			#jc{
				max-width: 100%; /* Ensure images scale with the container */
				height: auto;
				 width:70%;
				 margin-top: 0;
			}
			#js{
				position:absolute;
				width:56%;
				height:60%;
				left:24%;
				text-align: left;
			}
			#js-text {
						color: #ad7600;
						font-weight: bold;
						white-space: normal; /* 保持空白字符和换行符 */
						width:100%;
						 height:100%;/* 隐藏超出容器的文字 */
						display: inline-block; /* 允许设置宽度和高度 */
						vertical-align: top;
						/* 垂直对齐 */
					}
			 
					.typing-effect {
						display: inline-block; /* 行内块级元素 */
						opacity: 0; /* 初始透明度 */
						animation: fadeIn 0.1s forwards; /* 动画效果 */
					}
			 
					@keyframes fadeIn {
						to {
							opacity: 1;
						}
					}
			
			#dh1{
				width:100%;
				height:100%;
				position:absolute;
				z-index:10;
				left:0;
				top:0;
			}
			#js21{
				position:absolute;
				width:56%;
				height:20%;
				left:24%;
				top:10%;
				text-align: left;
				z-index:11;
			}
			#js22{
				position:absolute;
				width:56%;
				height:20%;
				left:24%;
				top:30%;
				text-align:left;
				z-index:11;
			}
			#js23{
				position:absolute;
				width:56%;
				height:20%;
				left:24%;
				top:50%;
				text-align: left;
				z-index:11;
			}
			#js2-text1,#js2-text2,#js2-text3 {
						color: #ad7600;
						font-weight: bold;
						white-space: normal; /* 保持空白字符和换行符 */
						width:100%;
						 height:100%;/* 隐藏超出容器的文字 */
						display: inline-block; /* 允许设置宽度和高度 */
						vertical-align: top;
						/* 垂直对齐 */
					}
			#d{
				display: flex;
				
				position:absolute;
				top:14%;
				transform: translate(0%,-50%);
				align-items: center;
				justify-content: center;
				text-align: center;
				width: 100%;
				max-width: 600px; /* Limit maximum width for better readability on large screens */
				margin: auto;
				
							
							
				box-sizing: border-box;
			}
			#jd{
				position:absolute;
				width:56%;
				height:60%;
				left:24%;
				text-align: left;
			}
			#jd-text {
						color: #ad7600;
						font-weight: bold;
						white-space: normal; /* 保持空白字符和换行符 */
						width:100%;
						 height:65%;/* 隐藏超出容器的文字 */
						display: inline-block; /* 允许设置宽度和高度 */
						vertical-align: top;
						/* 垂直对齐 */
					}
			#ty{
				position:absolute;
				width:25%;
				left:3%;
				margin:5%;
				bottom:0;
				display:block;
				z-index:11;
				cursor: pointer;
			}
			#jj{
				position:absolute;
				width:26%;
				left:56%;
				margin:5%;
				bottom:0;
				display:block;
				z-index:11;
				cursor: pointer;
			}
			#yh{
				position:absolute;
				width:40%;
				left:27%;
				
				bottom:-15%;
				display:none;
				z-index:11;
				animation:yh 5s linear 1 forwards ;
			}
			@keyframes yh{
				0%,70% {
				    opacity: 0;
				  }
				  
				  100%{
					  opacity: 1;
				  }
			}
			/* 针对移动端设备的调整 */
			@media (max-width: 768px) {
				.container {
					min-width: 100%; 
					background-size: cover; 
				}
				.back, .button {
					
					width: auto; 
					bottom: initial;
					left: initial; 
					
				}
				#js-text span.typing-effect {
				    line-height: 1.0;
					}
			}
			#js-text span.typing-effect {
			    line-height: 1.6;
				}
		</style>
		<script>
			 document.addEventListener('DOMContentLoaded', function() {
				  let currentStage = 1; // 当前阶段，初始为1
				         const stages = document.querySelectorAll('.stage'); // 获取所有阶段
				         const overlay = document.getElementById('overlay'); // 获取透明图层
			 			var textToDisplay = "南宋时期，虽然有很多卖丝绸的商家，但是销量一直不好，在历史的车轮中，你穿越到了一名贯穿古今的商人身上，你利用现代思维，将周围的商户聚集起来，召集他们进行第一次交流，这将决定濮商的命运。";
			 			var jsTextElement = document.getElementById('js-text');
			 			let textIndex = 0;
			 			var typingSpeed = 50; // 打字速度，单位毫秒
			 			
			 			function typeText(textElement, textToDisplay, callback) {
			 			    let textIndex = 0; // 这是一个局部变量，不应该在函数外部定义
			 			    const typingSpeed = 50; // 打字速度，单位毫秒
			 			 
			 			    function innerTypeText() {
			 			        if (textIndex < textToDisplay.length) {
			 			            const newSpan = document.createElement('span');
			 			            newSpan.className = 'typing-effect';
			 			            newSpan.textContent = textToDisplay[textIndex];
			 			            textElement.appendChild(newSpan);
			 			            textIndex++;
			 			            setTimeout(innerTypeText, typingSpeed);
			 			        }else {
                                  if (callback && typeof callback === 'function') {
                                          callback();
                                    }
			 			    }
			 			 }
			 			    innerTypeText();
			 			}
			 						  
			 			typeText(jsTextElement, textToDisplay);
						
						// 显示当前阶段，隐藏其他阶段
						            function showStage(stageNumber) {
						                stages.forEach(stage => {
						                    stage.classList.remove('active-stage'); // 移除所有阶段的active-stage类
						                    if (stage.id === `stage${stageNumber}`) {
						                        stage.classList.add('active-stage'); // 为当前阶段添加active-stage类
						                    }
						                });
						                // 根据需要重置或更新当前阶段的JavaScript逻辑（例如打字效果）
						                if (stageNumber === 1) {
						                    
						                }
										if (stageNumber === 2) {
										    // 重置打字效果（如果需要）
										    if (stageNumber === 2) {
										            const js2Text1Element = document.getElementById('js2-text1');
										            const textForStage21 = "这么些年，我们一直做自己的生意，大家都知道，现在生意都不好做，要是我们联合起来建立一个商会，以后再也不用担心吃穿问题了，今天召集大家来这里，就是想看看各位的意见，一切都是为了家人。我同意我们合作。";
										            js2Text1Element.innerHTML = '';
										     
										            typeText(js2Text1Element, textForStage21, () => {
										                const js2Text2Element = document.getElementById('js2-text2');
										                const textForStage22 = "我也同意";
										                js2Text2Element.innerHTML = '';
										     
										            typeText(js2Text2Element, textForStage22, () => {
										                const js2Text3Element = document.getElementById('js2-text3');
										                const textForStage23 = "同意";
										                js2Text3Element.innerHTML = '';
										     
										            typeText(js2Text3Element, textForStage23);
													
										        });
								        });
							        }
										}
										if (stageNumber === 3) {
										   const jdTextElement = document.getElementById('jd-text');
										   const textForStage3 = "现在大家都做出了决定，请你也作出决定，你的一举一动都代表着濮商的发展";
										   jdTextElement.innerHTML = '';
										   typeText(jdTextElement, textForStage3, function() {
										               // 打字完成后添加事件监听器
										               const tyImg = document.getElementById('ty');
										               tyImg.onclick = function() {
										                   const newText = "过了没多久，商会的发展迅速，生意也越做越大，你在其中做出了很多贡献，你的家族也成为了里面最大的家族，你还为会馆起了名字，叫做:";
										                   jdTextElement.innerHTML = '';
										                   typeText(jdTextElement, newText);
														   document.getElementById("ty").style.display="none";
														   document.getElementById("jj").style.display="none";
														   document.getElementById("yh").style.display="block";
										               };
													   const jjImg = document.getElementById('jj');
													   jjImg.onclick = function() {
													       const newText2 = "过了没多久，你的绸缎被商会的风头盖过，门可罗雀，最后你还是加入了商会，并发展十分迅速，你成为了里面最大的家族，还为会馆起了名字，叫做:";
													       jdTextElement.innerHTML = '';
													       typeText(jdTextElement, newText2);
													   		document.getElementById("ty").style.display="none";
													   		document.getElementById("jj").style.display="none";
													   		document.getElementById("yh").style.display="block";
													   };
										           });
									
										}
						                // ...（其他阶段的逻辑）...
						            }
						 
						            // 显示透明图层，并监听点击事件以切换到下一个阶段
						            overlay.addEventListener('click', function() {
						                if (currentStage < 3) { // 如果当前阶段不是最后一个阶段
						                    currentStage++; // 切换到下一个阶段
						                    showStage(currentStage); // 显示下一个阶段的内容
						                }
										if (currentStage==3) {
											overlay.style.display="none";
										}
										
						            });
						 
						            // 初始时显示透明图层（如果需要）
						            overlay.style.display = 'block';
			  
			 		
			  
			 			// 调整字体大小的函数（如果需要的话）
			 			function adjustFontSize() {
			 				const container = document.getElementById('bg');
			 				const baseFontSize = 16; // 基础字体大小
			 				const scaleFactor = Math.min(container.clientWidth / 600, container.clientHeight / 200); // 假设 600x300 是设计时的参考尺寸（注意这里我改为了300，因为#c的高度看起来像是与这个值相关）
				 			const newFontSize = `${baseFontSize * scaleFactor}px`;
	 				 		const jsElementWrapper = document.querySelector('#c #js'); // 获取#js的父容器或者直接#js（如果#js本身需要调整大小）
				 			const jsTextElement = document.getElementById('js-text');
						 		if (jsTextElement) {
			 					    jsTextElement.style.fontSize = newFontSize;
			 					    // 由于打字效果是基于span元素的，并且这些span可能没有继承jsTextElement的字体大小，
			 				        // 你可以选择直接设置这些span的字体大小，或者确保CSS规则允许它们继承。
			 					    // 在这里，我们假设CSS已经处理好了这个问题。
						 	    }
			 							 				 
			 					    // 调整stage2文本元素的字体大小
			 					const stage2TextElements = [document.getElementById('js2-text1'), document.getElementById('js2-text2'), document.getElementById('js2-text3')];
			 					stage2TextElements.forEach(element => {
						 			if (element) {
 							 	        element.style.fontSize = newFontSize;
			 					        // 同样地，确保span.typing-effect继承了这些元素的字体大小，或者直接设置它们的大小。
			 			 		    }
						 	    });
								const jdTextElement = document.getElementById('jd-text');
								jdTextElement.style.fontSize = newFontSize;
			 					}
			 						  
							window.addEventListener('resize', adjustFontSize);
							window.addEventListener('load', adjustFontSize);
						
						var yhElement = document.getElementById('yh');
						var overlay2Element = document.getElementById('overlay2');
										 
						yhElement.addEventListener('animationend', function() {
						    // 检查是否是 'yh' 动画结束
						    if (event.animationName === 'yh') {
						        overlay2Element.style.display = 'block';
						    }
						});
			 		});
				
				    
				
		</script>
	</head>
	<body>
		
	
		<div class="container">	
		    <div id="bg">
			    <img class="bgimg" src="psbg2.png"/>
				
			    <a href="pushangwenhua1_1.html">
					<<img id="back" src="psback.png" alt="返回键"/>
				</a>
				<div id="stage1" class="stage active-stage">
				    <div id="c">
				        <img id="jc" src="juece.png"/>
					    <div id="js">
			    			<span id="js-text"></span> <!-- 这里是显示打字效果的容器 -->
					    </div>
				    </div>
				</div>
				<div id="stage2" class="stage hidden">
				    
						<img id="dh1" src="dh1.png"/>
						<div id="js21" style="position:absolute;width:40%;height:15%;left:36%;top:12%;">
							<span id="js2-text1"></span>
						</div>
						<div id="js22" style="position:absolute;width:15%;height:3%;left:25%;top:37%;">
							<span id="js2-text2"></span>
						</div>
						<div id="js23" style="position:absolute;width:8%;height:3%;left:36%;top:50%;">
							<span id="js2-text3"></span>
						</div>
					           <!-- 阶段2的内容 -->
				</div>
				<div id="stage3" class="stage hidden">
				    <div id="d">
				        <img id="jc" src="juece.png"/>
				        <div id="jd">
				    		<span id="jd-text"></span>
							 <img id="ty" src="ty.png" />
							 <img id="jj" src="jj.png" onclick="no()"/>
							 <img id="yh" src="yh.png" />
							 <!-- 这里是显示打字效果的容器 -->
				        </div>
				    </div>            <!-- 阶段3的内容 -->
				</div>
				<div id="overlay" class="hidden"></div>
				<div id="overlay2" class="hidden">
					<a href="pshg3.html" class="block-link"></a>
				</div>
			</div>
			
		</div>
		
	
	</body>
	</html>